---
execute:
  eval: false
editor: 
  markdown: 
    wrap: 72
bibliography: references.bib
---

### Environment Management with renv

renv is a powerful R package designed to help manage project
environments by creating project-specific libraries and lockfiles. As
mentioned earlier, renv captures the exact versions of R packages used
in a project, storing this information in a renv.lock file. This allows
users to recreate the exact package environment when revisiting a
project or transferring it to a different machine, ensuring
reproducibility.

The renv workflow is straightforward:

-   Initialize renv in a project: renv creates a separate library in the
    project folder, isolating the packages from the system-wide library.

-   Snapshot dependencies: renv scans the project, identifying which
    packages are being used and recording their versions in the
    lockfile.

-   Restore environments: Anyone cloning or receiving the project can
    run renv::restore() to install the exact versions of the packages
    listed in the lockfile, reproducing the original project
    environment.

One of the core strengths of renv is its flexibility. It integrates
seamlessly with tools like RStudio, allowing easy management of
dependencies without disrupting existing workflows. This makes it
particularly well-suited for ensuring that research projects are
reproducible across different systems and platforms.

However, renv does not manage the **entire system environment** (such as
the version of R itself or external dependencies like system libraries).
For complete reproducibility, combining renv with containerization tools
(like Docker) or publishing outputs (such as code or data) via
repositories like Zenodo is recommended. The use of renv allows
researchers to easily capture and restore the R environment, while
repositories can ensure the long-term availability of the project’s
outputs.

The code specific workflow is straightforward and well explained in the
documentation: <https://rstudio.github.io/renv/articles/renv.html>

### Publishing and Archiving with Zenodo

Zenodo complements renv by providing a platform to publish, archive, and
share research outputs, including datasets, code, and publications.
Created by CERN and OpenAIRE, Zenodo ensures that research artifacts are
accessible for the long term, aligning with open science principles.
Each item published on Zenodo is assigned a permanent DOI, making it
easy to reference and cite in academic work.

A unique feature of Zenodo is its support for versioning. Researchers
can update their work over time, while earlier versions remain
accessible, ensuring transparency and reproducibility. This versioning
system is crucial in scientific research, where updated analyses and
data corrections are often necessary, but reproducibility of original
work must be maintained.

The zen4R package [@blondel2024] enhances the integration of R with
Zenodo by providing tools to programmatically interact with Zenodo’s API
directly from R. This package allows researchers to:

-   Upload datasets and code to Zenodo.

-   Automate the publication process by creating new records, updating
    metadata, and managing depositions.

-   Retrieve information about existing Zenodo records.

This makes it easier to publish research outputs, ensuring that
versioning, DOIs, and metadata management are handled efficiently within
R workflows, facilitating reproducibility and sharing in open science
practices. Learn more about the zen4R package:
<https://cran.r-project.org/web/packages/zen4R/vignettes/zen4R.html>

Zenodo also integrates seamlessly with GitHub. When a research project
(e.g., code) is hosted on GitHub, Zenodo can automatically archive the
repository upon each new release, creating a snapshot with a DOI. This
integration simplifies the process of ensuring that research code is
preserved in an immutable form, contributing to better practices in
reproducible science.

While renv focuses on internal reproducibility by controlling the R
environment, Zenodo ensures external reproducibility by providing a
stable and citable repository for the research outputs. Combining both
tools allows researchers to capture the environment in which their
analysis was conducted and share it along with their data and code.
Together, renv and Zenodo form a comprehensive solution for
reproducible, open science research in accordance with the FAIR guiding
principles [@wilkinson2016].

    
    # edit data, delete_latest_files = TRUE deletes data of previous version,
    myrec <- zenodo$depositRecordVersion(myrec, delete_latest_files = TRUE, files = "path/to/your/new/file", publish = TRUE)
    ```
