{
  "hash": "2bcb56e6f09b0249a65cf65266c0c80e",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexecute:\n  eval: false\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n# Use renv to create project-specific environments in R\n## Setting Up a Project with renv\n\n-   Initialize renv in your project:\n    -   Use renv::init() to initialize renv in your project directory.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # initialize the project environment\n    renv::init()\n    ```\n    :::\n\n\n    -   This command creates an isolated environment for your project, and ensures that all package dependencies are managed within that environment. When you run renv::init(), several important files and directories are created:\n        -   renv.lock, a lock file that records the exact versions of all packages installed and used in your project. This file is crucial for replicating the environment on other machines or by other people.\n        -   .Rprofile, this file is automatically run every time you start R in your project, and renv uses it to configure your R session to use the packages in your project library.\n     -   renv/ directory, a directory that stores the local library of packages specific to your project. It also contains metadata and configuration files that renv uses to manage the environment.\n    -   Other directories and files are also created. To share an R environment, renv.lock, .Rprofile, renv/settings.json and renv/activate.R must be provided.\n     \n     \n## Managing Packages with renv\n\n-   Install packages within renv\n    -   Install packages as usual. Then running renv::snapshot() will include the library in the lock file if it is loaded in a script located within the project folder\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # Install a library, e.g dplyr\n    install.packages(\"dplyr\")\n    \n    # load the package\n    library(dplyr)\n    \n    # create the snapshot\n    renv::snapshot()\n    ```\n    :::\n\n\n        \n     \n## Reuse an existing renv project environment:\n-   Get all the packages used in the existing environment installed on your computer\n    -   Copy the project folder to your machine.\n    -   Run renv::restore() in the root folder of the project where the .lock file is located. This will replicate the environment from an existing lockfile and install all packages with the correct versions.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # install packages used in the environment\n    renv::restore()\n    ```\n    :::\n\n\n\n# Publish your work with Zenodo to make it accessible and citable   \n## Install zen4R to access Zenodo through r\n-   Zenodo can be accessed with r library zen4R to upload, edit, publish and download data.\n    -   Install zen4R library with the following code:\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # install dependency \"remotes\"\n    install.packages(\"remotes\")\n    \n    #install zen4R\n    require(\"remotes\")\n    install_github(\"eblondel/zen4R\")\n    ```\n    :::\n\n\n\n## Create a new Zenodo record\n-   A zenodo record includes metadata, data and a DOI which is automatically generated by Zenodo for all uploads.\n    -   Go to https://zenodo.org/account/settings/applications/. This requires a Zenodo account. Sign up if necessary or log in.\n    -   Once you're logged in create a new \"Personal access token\".\n    -   Then run the following code in r to c create a new record\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    library(zen4R)\n    \n    # Create manager to access your Zenodo repository\n    zenodo <- ZenodoManager$new(\n      token = \"your_token\", \n      logger = \"INFO\" \n    )\n    \n    # Create a new empty record\n    myrec <- ZenodoRecord$new()\n    ```\n    :::\n\n\n\n-   The types of metadata that can be included in a Zenodo record are vast. A full list can be found in the documentation at https://developers.zenodo.org/#representation. The code below gives some examples:\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    myrec$setTitle(\"zen4R\") # title of the record\n    myrec$addAdditionalTitle(\"This is an alternative title\", type = \"alternative-title\")\n    myrec$setDescription(\"Interface to 'Zenodo' REST API\") #description\n    myrec$addAdditionalDescription(\"This is an abstract\", type = \"abstract\")\n    myrec$setPublicationDate(\"2024-09-16\") #Format YYYY-MM-DD\n    myrec$setResourceType(\"dataset\")\n    myrec$addCreator(firstname = \"Manuel\", lastname = \"Kurmann\", role = \"datamanager\", orcid = \"0000-0001-8411-3966\")\n    myrec$setKeywords(c(\"R\",\"dataset\")) #For filtering\n    myrec$addReference(\"Blondel E. et al., 2024 zen4R: R Interface to Zenodo REST API\")\n    myrec$setPublisher(\"CRAN\") #Publisher\n    ```\n    :::\n\n\n    \n-   A record can be deposited on Zenodo before it is published. This will add the record to your account without making it public yet. A deposited record can still be edited or deleted. If you prefer a graphical interface, you can also edit the record on the Zenodo website.\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # deposit record\n    myrec <- zenodo$depositRecord(myrec, publish = TRUE)\n    \n    # add data to the record\n    zenodo$uploadFile(\"path/to/your/file\", record = myrec)\n    \n    # publish record\n    myrec <- zenodo$publishRecord(myrec$id)\n    \n    # delete record if you want to start over\n    zenodo$deleteRecord(myrec$id)\n    ```\n    :::\n\n\n\n## Edit published Zenodo records\n-   It is also possible to edit or update the metadata of published records.\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # get your record by metadata query, e.g. by title\n    myrec <- zenodo$getDepositions(q='title:zen4R')\n    \n    # get depositions creates a list, access first element\n    myrec <- myrec[[1]]\n    \n    # edit metadata\n    myrec <- zenodo$editRecord(myrec$id)\n    myrec$setTitle(\"zen4R 2.0\")\n    \n    #redeposit and publish the edited record\n    myrec <- zenodo$depositRecord(myrec, publish = TRUE)\n    ```\n    :::\n\n\n\n-   It is not possible to edit the data attached to a published record. However, it is possible to upload an updated version.\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # get your record by metadata query, e.g. by title\n    myrec <- zenodo$getDepositions(q='title:zen4R 2.0')\n    \n    # get depositions creates a list, access first element\n    myrec <- myrec[[1]]\n    \n    # edit data, delete_latest_files = TRUE deletes data of previous version,\n    myrec <- zenodo$depositRecordVersion(myrec, delete_latest_files = TRUE, files = \"path/to/your/new/file\", publish = TRUE)\n    ```\n    :::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}